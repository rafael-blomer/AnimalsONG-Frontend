<main class="flex justify-center bg-gray-50 px-4 py-10 min-h-screen">
  <div class="w-full max-w-4xl space-y-6">

    <!-- CabeÃ§alho -->
    <div class="flex items-center justify-between">
      <div>
        <h2 class="text-2xl font-bold text-gray-800">Animais</h2>
        <p class="text-sm text-gray-500 mt-1">
          {{ totalElements }} {{ totalElements === 1 ? 'animal cadastrado' : 'animais cadastrados' }}
        </p>
      </div>
      <a routerLink="/home/animais/cadastrar"
        class="flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700
               text-white text-sm font-semibold rounded-lg transition">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
        Novo animal
      </a>
    </div>

    <!-- Filtros -->
    <div class="bg-white rounded-2xl shadow-xl p-6">
      <form [formGroup]="form" class="flex flex-col sm:flex-row gap-4 items-end">

        <div class="flex flex-col gap-1 flex-1">
          <label class="text-xs font-medium text-gray-500 uppercase tracking-wide">EspÃ©cie</label>
          <select class="input" formControlName="especie">
            <option *ngFor="let e of especies" [value]="e.valor">{{ e.label }}</option>
          </select>
        </div>

        <div class="flex flex-col gap-1 flex-1">
          <label class="text-xs font-medium text-gray-500 uppercase tracking-wide">Status</label>
          <select class="input" formControlName="statusFiltro">
            <option *ngFor="let s of listaStatus" [value]="s.valor">{{ s.label }}</option>
          </select>
        </div>

        <div class="flex flex-col gap-1 flex-1">
          <label class="text-xs font-medium text-gray-500 uppercase tracking-wide">Ordenar por entrada</label>
          <select class="input" formControlName="ordem">
            <option value="dataEntrada,desc">Mais recente primeiro</option>
            <option value="dataEntrada,asc">Mais antigo primeiro</option>
          </select>
        </div>

        <button type="button" (click)="buscar(0)" [disabled]="carregando"
          class="relative px-6 py-3 rounded-lg text-white text-sm font-semibold overflow-hidden transition disabled:opacity-70 whitespace-nowrap"
          [style.background]="carregando ? '' : '#2563eb'">
          <span *ngIf="carregando"
            class="absolute inset-0 bg-gradient-to-r from-blue-500 via-blue-400 to-blue-600 animate-shimmer"></span>
          <span class="relative flex items-center gap-2">
            <svg *ngIf="carregando" class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" class="opacity-25" />
              <path fill="currentColor" class="opacity-75" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" />
            </svg>
            Filtrar
          </span>
        </button>

      </form>
    </div>

    <!-- Erro -->
    <div *ngIf="erro"
      class="flex items-start gap-3 bg-red-50 border border-red-200 text-red-700 rounded-lg px-4 py-3 text-sm">
      <svg class="w-4 h-4 mt-0.5 shrink-0" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd"
          d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
          clip-rule="evenodd" />
      </svg>
      <span>{{ erro }}</span>
    </div>

    <!-- Spinner -->
    <div *ngIf="carregando" class="flex justify-center py-16">
      <svg class="w-8 h-8 animate-spin text-blue-500" fill="none" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" class="opacity-25" />
        <path fill="currentColor" class="opacity-75" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" />
      </svg>
    </div>

    <!-- Vazio -->
    <div *ngIf="!carregando && animais.length === 0 && !erro"
      class="bg-white rounded-2xl shadow-xl p-16 flex flex-col items-center justify-center text-center">
      <svg class="w-12 h-12 text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
          d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
      </svg>
      <p class="text-gray-400 text-sm">Nenhum animal encontrado.</p>
      <a routerLink="/home/animais/cadastrar" class="mt-4 text-blue-600 hover:underline text-sm font-medium">
        Cadastrar primeiro animal
      </a>
    </div>

    <!-- Lista -->
    <div *ngIf="!carregando && animais.length > 0" class="space-y-4">
      <div *ngFor="let animal of animais"
        class="bg-white rounded-2xl shadow-xl overflow-hidden flex">

        <!-- Foto -->
        <div class="w-32 shrink-0">
          <img [src]="animal.fotoUrl" [alt]="animal.nome" class="w-full h-full object-cover" />
        </div>

        <!-- Dados -->
        <div class="flex flex-1 items-center justify-between px-6 py-4 gap-4">
          <div class="flex-1 min-w-0">

            <div class="flex items-center gap-2 flex-wrap mb-1">
              <h3 class="text-base font-bold text-gray-800">{{ animal.nome }}</h3>

              <span class="text-xs bg-blue-50 text-blue-600 font-semibold px-2 py-0.5 rounded-full">
                {{ especieLabel(animal.especie) }}
              </span>

              <span *ngIf="animal.castrado"
                class="text-xs bg-purple-50 text-purple-600 font-semibold px-2 py-0.5 rounded-full">
                Castrado
              </span>

              <span class="text-xs font-semibold px-2 py-0.5 rounded-full"
                [ngClass]="{
                  'bg-green-50 text-green-700':   animal.status === 'ATIVO',
                  'bg-indigo-50 text-indigo-700': animal.status === 'ADOTADO',
                  'bg-red-50 text-red-600':       animal.status === 'OBITO'
                }">
                {{ statusLabel(animal.status) }}
              </span>
            </div>

            <p class="text-sm text-gray-500">{{ animal.raca }}</p>

            <div class="flex flex-wrap gap-3 mt-2 text-xs text-gray-500">
              <span>ğŸ¾ {{ porteLabel(animal.porte) }}</span>
              <span>âš¥ {{ sexoLabel(animal.sexo) }}</span>
              <span>ğŸ‚ {{ animal.idadeAproximada }} {{ animal.idadeAproximada === 1 ? 'ano' : 'anos' }}</span>
              <span>ğŸ“… Entrada: {{ animal.dataEntrada | date:'dd/MM/yyyy' }}</span>
            </div>

          </div>

          <!-- BotÃ£o editar -->
          <button type="button" (click)="editar(animal.id)"
            class="flex items-center gap-2 px-4 py-2 rounded-lg border border-blue-600 text-blue-600
                   hover:bg-blue-50 text-sm font-medium transition shrink-0">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
            </svg>
            Editar
          </button>
        </div>

      </div>
    </div>

    <!-- PaginaÃ§Ã£o -->
    <div *ngIf="!carregando && totalPages > 1" class="flex items-center justify-center gap-2">

      <button type="button" (click)="paginaAnterior()" [disabled]="page === 0"
        class="px-3 py-2 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50
               text-sm transition disabled:opacity-40 disabled:cursor-not-allowed">
        â† Anterior
      </button>

      <button *ngFor="let p of paginas" type="button" (click)="buscar(p)"
        class="px-3 py-2 rounded-lg text-sm font-medium transition"
        [ngClass]="{
          'bg-blue-600 text-white': p === page,
          'border border-gray-300 text-gray-600 hover:bg-gray-50': p !== page
        }">
        {{ p + 1 }}
      </button>

      <button type="button" (click)="proximaPagina()" [disabled]="page === totalPages - 1"
        class="px-3 py-2 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-50
               text-sm transition disabled:opacity-40 disabled:cursor-not-allowed">
        PrÃ³xima â†’
      </button>

    </div>

  </div>
</main>
